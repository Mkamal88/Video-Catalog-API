# Video Catalog API

The Video Catalog API is a simple RESTful API built with FastAPI and PostgreSQL. It allows you to manage video resources by performing CRUD operations.

### Prerequisites

To run this program, you need to have the following software installed on your machine:

- Python 3.7 or higher
- PostgreSQL

### Installation

1. Clone the repository:

   ```bash
   git clone https://github.com/Mkamal88/Video-Catalog-API.git

### Structure

* **alembic**: contains all migration scripts generated by Alembic.
* **database.py**: contains all database methods and configuration.
* **models.py**: for ORM sqlalchemy models. 
* **main.py**: for fastapi endpoints and the entry point to our code.
* **schemas.py**: schema for endpoints data requests and responses.
* **test_main.py**: for the unittesting
* **alembic.ini**: configuration file for alembic.  
* **readme.me**: this file.

### Running-the-API

1. Navigate to the project directory:
   ```bash
   cd your-project
2. Create and activate a virtual environment:
   ```bash
   python -m venv venv
   venv\Scripts\activate
3. Install the project dependencies:
   ```bash
   pip install -r requirements.txt

4. Running the API

    * Make sure you have PostgreSQL running on your local machine.

    * Configure the PostgreSQL connection details in the config.py file.

    * Run the database migrations:
      ```bash
      alembic upgrade head
      
    * Start the FastAPI server:
      ```bash
      uvicorn main:app --reload
The API will be accessible at http://localhost:8000.

### API Endpoints

1. Create a Video

    * URL: /videos
    * Method: POST
    * Request Body:
   ```json
   {
    "title": "Video Title",
    "description": "Video Description",
    "duration": 120
   }
   ```
    * Response:
   ```json
    {
      "id": 1,
      "title": "Video Title",
      "description": "Video Description",
      "duration": 120
    }
   ```
2. Retrieve a Video

    * URL: /videos/{video_id}
    * Method: GET
    * Response:
      ```json
      {
      "id": 1,
      "title": "Video Title",
      "description": "Video Description",
      "duration": 120
      }
      ```

3. Update a Video

    * URL: /videos/{video_id}
    * Method: PUT
    * Request Body:
      ```json
      {
        "title": "Updated Title",
        "description": "Updated Description",
        "duration": 150
      }
      ```
    * Response:
      ```json
      {
        "id": 1,
        "title": "Updated Title",
        "description": "Updated Description",
        "duration": 150
      }
      ```

4. Delete a Video

    * URL: /videos/{video_id}
    * Method: DELETE
    * Response:
      ```json
      {
        "message": "Video deleted"
      }
      ```
  
5. Retrieve Videos with Pagination
   * URL: /videos
   * Method: GET
   * Parameters:
    - limit (optional): The maximum number of videos to retrieve. Default is 10.
    - offset (optional): The number of videos to skip. Default is 0.
   * Response:
     ```json
      {
      	"videos": [
      		{
      			"id": 1,
      			"title": "Video 1",
      			"description": "Description 1",
      			"duration": 120
      		},
      		{
      			"id": 2,
      			"title": "Video 2",
      			"description": "Description 2",
      			"duration": 180
      		}
      	],
      	"total": 2
      }
     ```

  ### Running Unit Tests

  To run the unit tests for the API endpoints, follow these steps:
  1. Activate the virtual environment if it's not already active.
  2. Run the following command:
     ```bash
     pytest test_main.py
The test results will be displayed in the terminal.
